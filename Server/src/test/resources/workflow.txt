
@!1111!0008!FF81!2D40

1. Authorize request
op: seed.gluu.org/oxTrust
scopes : myaddress -> address
oxProx client: @!1111!1001!0000!0001 -> @!1111!0008!FF81!2D40
http://localhost:8098/oxProx/rest/authorize?response_type=code+id_token&scope=openid+profile+myaddress+email&redirect_uri=https%3A%2F%2Fseed.gluu.org%2FoxTrust&nonce=nonce&auth_mode=duo&auth_step=1&client_id=%40!1111!1001!0000!0001

2. oxProx redirect to seed (User choose seed.gluu.org as OP)
https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/authorize?scope=openid+profile+address+email+&response_type=code+id_token+&redirect_uri=https://seed.gluu.org/oxProx/redirect.xhtml&nonce=nonce+&auth_mode=duo+&auth_step=1+&client_id=%40!1111!0008!FF81!2D39+

3. User login

4. Seed redirect to
https://seed.gluu.org/oxProx/redirect.xhtml#code=a968385a-a52d-41ad-9663-dbffd15a16c6&id_token=eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImtpZCI6IjEifQ.eyJpc3MiOiJodHRwczovL3NlZWQuZ2x1dS5vcmciLCJhdWQiOiJAITExMTEhMDAwOCFGRjgxITJEMzkiLCJleHAiOjEzOTU5NDYxNzUsImlhdCI6MTM5NTk0MjU3NSwic3ViIjoieXVyaXkiLCJveEludW0iOiJAITExMTEhMDAwMCFEREREIiwibm9uY2UiOiJub25jZSAiLCJhdXRoX3RpbWUiOjEzOTU5NDI1NzQsImNfaGFzaCI6IlQ2UFUxdnZQd2Fkb194enRzSmtPSWciLCJveFZhbGlkYXRpb25VUkkiOiJodHRwczovL3NlZWQuZ2x1dS5vcmcvb3hhdXRoL29waWZyYW1lLnNlYW0iLCJveE9wZW5JRENvbm5lY3RWZXJzaW9uIjoib3BlbmlkY29ubmVjdC0xLjAiLCJ6b25laW5mbyI6IkFtZXJpY2EvQ2hpY2FnbyIsImVtYWlsIjoieXVyaXlAZ2x1dS5vcmciLCJsb2NhbGUiOiJlbl9VUyIsIm5hbWUiOiJZdXJpeSBaYWJyb3Zhcm55eSIsImxvY2FsaXR5IjoiTHZpdiIsImZhbWlseV9uYW1lIjoiWmFicm92YXJueXkiLCJnaXZlbl9uYW1lIjoiWXVyaXkiLCJhbXIiOiJiYXNpYyJ9.X57DK6wOPwrQAYByGp0YVb4K6B1MXWeJ3STuUT90PJWlDiSYGs0rHSPU7p-t3e4MVwX1pH1LPgtW6tYgVucWcwylTxu7UpjROWzaoerAucu051ISISEg6P8e-6krcWzsWvRwVA0DHt4Yh5blSvYinF2hCBei_zZowyYC7i_GompT804tzpwpBSZjT97K9bOEIRyONT6t2An36XKHwtWQK_R4PO2KLKarUpjgIbFi9wN8VR3ZW6TfBhbRFSRLkPGvpxA-ggHCXx-L_qc7a1xUYDS3roFdh5zs8zMbXiFeNwgRzwR62vc7JarzBWjuHDruGYcmFNwJN_8DI1RTlxDs2g&auth_level=10&auth_mode=basic&session_id=8b9afec9-3332-4cb5-aec8-76ace5491dc9&scope=openid+profile+address+email
http://localhost:8098/oxProx/redirect.xhtml#code=a968385a-a52d-41ad-9663-dbffd15a16c6&id_token=eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImtpZCI6IjEifQ.eyJpc3MiOiJodHRwczovL3NlZWQuZ2x1dS5vcmciLCJhdWQiOiJAITExMTEhMDAwOCFGRjgxITJEMzkiLCJleHAiOjEzOTU5NDYxNzUsImlhdCI6MTM5NTk0MjU3NSwic3ViIjoieXVyaXkiLCJveEludW0iOiJAITExMTEhMDAwMCFEREREIiwibm9uY2UiOiJub25jZSAiLCJhdXRoX3RpbWUiOjEzOTU5NDI1NzQsImNfaGFzaCI6IlQ2UFUxdnZQd2Fkb194enRzSmtPSWciLCJveFZhbGlkYXRpb25VUkkiOiJodHRwczovL3NlZWQuZ2x1dS5vcmcvb3hhdXRoL29waWZyYW1lLnNlYW0iLCJveE9wZW5JRENvbm5lY3RWZXJzaW9uIjoib3BlbmlkY29ubmVjdC0xLjAiLCJ6b25laW5mbyI6IkFtZXJpY2EvQ2hpY2FnbyIsImVtYWlsIjoieXVyaXlAZ2x1dS5vcmciLCJsb2NhbGUiOiJlbl9VUyIsIm5hbWUiOiJZdXJpeSBaYWJyb3Zhcm55eSIsImxvY2FsaXR5IjoiTHZpdiIsImZhbWlseV9uYW1lIjoiWmFicm92YXJueXkiLCJnaXZlbl9uYW1lIjoiWXVyaXkiLCJhbXIiOiJiYXNpYyJ9.X57DK6wOPwrQAYByGp0YVb4K6B1MXWeJ3STuUT90PJWlDiSYGs0rHSPU7p-t3e4MVwX1pH1LPgtW6tYgVucWcwylTxu7UpjROWzaoerAucu051ISISEg6P8e-6krcWzsWvRwVA0DHt4Yh5blSvYinF2hCBei_zZowyYC7i_GompT804tzpwpBSZjT97K9bOEIRyONT6t2An36XKHwtWQK_R4PO2KLKarUpjgIbFi9wN8VR3ZW6TfBhbRFSRLkPGvpxA-ggHCXx-L_qc7a1xUYDS3roFdh5zs8zMbXiFeNwgRzwR62vc7JarzBWjuHDruGYcmFNwJN_8DI1RTlxDs2g&auth_level=10&auth_mode=basic&session_id=8b9afec9-3332-4cb5-aec8-76ace5491dc9&scope=openid+profile+address+email

4. oxProx redirect.html via redirect WS resolves original RP and redirects to it
https://seed.gluu.org/oxTrust#code=a968385a-a52d-41ad-9663-dbffd15a16c6&id_token=eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImtpZCI6IjEifQ.eyJpc3MiOiJodHRwczovL3NlZWQuZ2x1dS5vcmciLCJhdWQiOiJAITExMTEhMDAwOCFGRjgxITJEMzkiLCJleHAiOjEzOTU5NDYxNzUsImlhdCI6MTM5NTk0MjU3NSwic3ViIjoieXVyaXkiLCJveEludW0iOiJAITExMTEhMDAwMCFEREREIiwibm9uY2UiOiJub25jZSAiLCJhdXRoX3RpbWUiOjEzOTU5NDI1NzQsImNfaGFzaCI6IlQ2UFUxdnZQd2Fkb194enRzSmtPSWciLCJveFZhbGlkYXRpb25VUkkiOiJodHRwczovL3NlZWQuZ2x1dS5vcmcvb3hhdXRoL29waWZyYW1lLnNlYW0iLCJveE9wZW5JRENvbm5lY3RWZXJzaW9uIjoib3BlbmlkY29ubmVjdC0xLjAiLCJ6b25laW5mbyI6IkFtZXJpY2EvQ2hpY2FnbyIsImVtYWlsIjoieXVyaXlAZ2x1dS5vcmciLCJsb2NhbGUiOiJlbl9VUyIsIm5hbWUiOiJZdXJpeSBaYWJyb3Zhcm55eSIsImxvY2FsaXR5IjoiTHZpdiIsImZhbWlseV9uYW1lIjoiWmFicm92YXJueXkiLCJnaXZlbl9uYW1lIjoiWXVyaXkiLCJhbXIiOiJiYXNpYyJ9.X57DK6wOPwrQAYByGp0YVb4K6B1MXWeJ3STuUT90PJWlDiSYGs0rHSPU7p-t3e4MVwX1pH1LPgtW6tYgVucWcwylTxu7UpjROWzaoerAucu051ISISEg6P8e-6krcWzsWvRwVA0DHt4Yh5blSvYinF2hCBei_zZowyYC7i_GompT804tzpwpBSZjT97K9bOEIRyONT6t2An36XKHwtWQK_R4PO2KLKarUpjgIbFi9wN8VR3ZW6TfBhbRFSRLkPGvpxA-ggHCXx-L_qc7a1xUYDS3roFdh5zs8zMbXiFeNwgRzwR62vc7JarzBWjuHDruGYcmFNwJN_8DI1RTlxDs2g&auth_level=10&auth_mode=basic&session_id=8b9afec9-3332-4cb5-aec8-76ace5491dc9&scope=openid+profile+address+email
http://localhost:8098/oxTrust#code=a968385a-a52d-41ad-9663-dbffd15a16c6&id_token=eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImtpZCI6IjEifQ.eyJpc3MiOiJodHRwczovL3NlZWQuZ2x1dS5vcmciLCJhdWQiOiJAITExMTEhMDAwOCFGRjgxITJEMzkiLCJleHAiOjEzOTU5NDYxNzUsImlhdCI6MTM5NTk0MjU3NSwic3ViIjoieXVyaXkiLCJveEludW0iOiJAITExMTEhMDAwMCFEREREIiwibm9uY2UiOiJub25jZSAiLCJhdXRoX3RpbWUiOjEzOTU5NDI1NzQsImNfaGFzaCI6IlQ2UFUxdnZQd2Fkb194enRzSmtPSWciLCJveFZhbGlkYXRpb25VUkkiOiJodHRwczovL3NlZWQuZ2x1dS5vcmcvb3hhdXRoL29waWZyYW1lLnNlYW0iLCJveE9wZW5JRENvbm5lY3RWZXJzaW9uIjoib3BlbmlkY29ubmVjdC0xLjAiLCJ6b25laW5mbyI6IkFtZXJpY2EvQ2hpY2FnbyIsImVtYWlsIjoieXVyaXlAZ2x1dS5vcmciLCJsb2NhbGUiOiJlbl9VUyIsIm5hbWUiOiJZdXJpeSBaYWJyb3Zhcm55eSIsImxvY2FsaXR5IjoiTHZpdiIsImZhbWlseV9uYW1lIjoiWmFicm92YXJueXkiLCJnaXZlbl9uYW1lIjoiWXVyaXkiLCJhbXIiOiJiYXNpYyJ9.X57DK6wOPwrQAYByGp0YVb4K6B1MXWeJ3STuUT90PJWlDiSYGs0rHSPU7p-t3e4MVwX1pH1LPgtW6tYgVucWcwylTxu7UpjROWzaoerAucu051ISISEg6P8e-6krcWzsWvRwVA0DHt4Yh5blSvYinF2hCBei_zZowyYC7i_GompT804tzpwpBSZjT97K9bOEIRyONT6t2An36XKHwtWQK_R4PO2KLKarUpjgIbFi9wN8VR3ZW6TfBhbRFSRLkPGvpxA-ggHCXx-L_qc7a1xUYDS3roFdh5zs8zMbXiFeNwgRzwR62vc7JarzBWjuHDruGYcmFNwJN_8DI1RTlxDs2g&auth_level=10&auth_mode=basic&session_id=8b9afec9-3332-4cb5-aec8-76ace5491dc9&scope=openid+profile+address+email

5. user info

Questions:
1. we do not support op clients with encryption and signing (only plain json) - however it should be possible to descrypt and re-sign
2. discovery - provide own discovery. Question: do we need to proxy original OP discovery?
